% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_totals.R
\name{get_totals}
\alias{get_totals}
\title{Calculate Multi-Level Total Probabilities and Expected Counts}
\usage{
get_totals(
  mcmodule,
  mc_names,
  trials_n = "animals_n",
  subsets_n = "farms_n",
  subsets_p = NULL,
  name = NULL,
  suffix = NULL,
  prefix = NULL,
  all_mc_names = TRUE,
  agg_keys = NULL,
  keep_variates = FALSE,
  summary = TRUE
)
}
\arguments{
\item{mcmodule}{An mcmodule object with input data and node structure}

\item{mc_names}{Vector of node names to process}

\item{trials_n}{Trial count column name (default: "animals_n")}

\item{subsets_n}{Subset count column name (default: "farms_n")}

\item{subsets_p}{Subset prevalence column name (default: NULL)}

\item{name}{Custom name for output nodes (optional)}

\item{suffix}{Suffix for aggregated node names (default: "agg")}

\item{prefix}{Prefix for output node names (optional)}

\item{all_mc_names}{If TRUE, processes all nodes (default: TRUE)}

\item{agg_keys}{Vector of column names to aggregate by (optional)}

\item{summary}{If TRUE, includes summary statistics (default: calc_summary)}
}
\value{
Updated mcmodule object with:
\itemize{
\item Combined probabilities across nodes
\item Trial-level probabilities and counts
\item Subset-level probabilities and counts
\item Set-level probabilities and counts
}
}
\description{
Calculates hierarchical probabilities and expected counts across different levels
(for example: trial, subset, set) using trial probabilities and population structure.
Handles nested sampling with conditional probabilities.
}
\examples{
result <- get_totals2(
  mcmodule = purchase_origin,
  mc_names = c("a_inf", "a_inf_pi", "a_inf_tr")
)

}
