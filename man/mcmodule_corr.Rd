% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mc_analysis.R
\name{mcmodule_corr}
\alias{mcmodule_corr}
\title{Calculate Correlation Coefficients for Monte Carlo Module Inputs and Outputs}
\usage{
mcmodule_corr(
  mcmodule,
  output = NULL,
  by_exp = FALSE,
  match_variates = TRUE,
  variates_as_nsv = FALSE,
  print_summary = TRUE,
  progress = FALSE,
  method = c("spearman", "kendall", "pearson"),
  use = "all.obs",
  lim = c(0.025, 0.975)
)
}
\arguments{
\item{mcmodule}{Monte Carlo module object}

\item{output}{Character string specifying the output node name. If NULL (default),
uses the last node in mcmodule$node_list (or last expression output if by_exp = TRUE).}

\item{by_exp}{Logical, whether to calculate correlations by expression output.
If FALSE (default), calculates correlation by global output (last node).}

\item{match_variates}{Logical, whether to match input nodes to output variates.
Default is TRUE.}

\item{variates_as_nsv}{Logical, if TRUE, combines all variates into a single mc object
for correlation analysis. If FALSE (default), analyzes each variate separately.
See \code{\link{mcmodule_to_mc}} for details.}

\item{print_summary}{Logical, whether to print the summary output.
Default is TRUE.}

\item{progress}{Logical, whether to print progress information while running.
Default is FALSE.}

\item{method}{(for \samp{mc} objects only). A character string
indicating which correlation coefficient (or covariance) is to be
computed. One of "spearman" (default), "kendall" or "pearson", can be
abbreviated (see \code{\link{cor}}). Warning : the default is not the
same in \code{\link{cor}}.}

\item{use}{(for \samp{mc} objects only). An optional character string
giving a method for computing covariances in the presence of missing
values. This must be (an abbreviation of) one of the strings
"all.obs", "complete.obs" or "pairwise.complete.obs" (see
\code{\link{cor}}).}

\item{lim}{A vector of quantiles used to compute the credible
interval in two-dimensional models.}
}
\value{
Data frame with correlation coefficients and metadata. Columns include:
\itemize{
\item exp: Expression name
\item exp_n: Expression number
\item variate: Variate number
\item output: Output node name
\item input: Input node name
\item value: Correlation coefficient value
\item strength: Qualitative strength of association (Very strong, Strong, Moderate, Weak, None)
\item method: Correlation method used (spearman, kendall, or pearson)
\item use: Method for handling missing values (passed to cor())
\item warnings: Any warnings generated during correlation calculation (if present)
\item Additional columns for global keys (e.g., pathogen, origin)
}
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#experimental}{\figure{lifecycle-experimental.svg}{options: alt='[Experimental]'}}}{\strong{[Experimental]}}
Computes correlation coefficients between Monte Carlo module inputs and outputs
using the tornado analysis from the mc2d package. Supports multiple correlation
methods and captures any warnings generated during calculation.
}
\examples{
mcmodule <- agg_totals(mcmodule = imports_mcmodule, mc_name = "no_detect_a", agg_keys = "pathogen")
cor_results <- mcmodule_corr(mcmodule)

# Use single method
cor_results_spearman <- mcmodule_corr(mcmodule, method = "spearman")

}
