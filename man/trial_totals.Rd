% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_totals.R
\name{trial_totals}
\alias{trial_totals}
\title{Calculate Probabilities and Expected Counts Across Hierarchical Levels}
\usage{
trial_totals(
  mcmodule,
  mc_names,
  trials_n,
  subsets_n = NULL,
  subsets_p = NULL,
  name = NULL,
  prefix = NULL,
  combine_prob = TRUE,
  mctable = set_mctable(),
  agg_keys = NULL,
  suffix = "agg",
  keep_variates = FALSE,
  summary = TRUE
)
}
\arguments{
\item{mcmodule}{McModule object containing input data and node structure}

\item{mc_names}{Vector of node names to process}

\item{trials_n}{Trial count column name}

\item{subsets_n}{Subset count column name (optional)}

\item{subsets_p}{Subset prevalence column name (optional)}

\item{name}{Custom name for output nodes (optional)}

\item{prefix}{Prefix for output node names (optional)}

\item{combine_prob}{Process all nodes if TRUE (default)}

\item{agg_keys}{Column names for aggregation (optional)}

\item{suffix}{Suffix for aggregated names (optional)}

\item{summary}{Include summary statistics if TRUE (default)}
}
\value{
Updated mcmodule object containing:
\itemize{
\item Combined node probabilities
\item Probabilities and counts at trial level
\item Probabilities and counts at subset level
\item Probabilities and counts at set level
}
}
\description{
A function to calculate probabilities and expected counts across hierarchical levels
(trial, subset, set) in a structured population. Uses trial probabilities and
handles nested sampling with conditional probabilities.
}
\examples{
result <- trial_totals(
  mcmodule = purchase_origin,
  mc_names = c("a_inf", "a_inf_pi", "a_inf_tr")
)

}
