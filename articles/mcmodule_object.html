<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>The mcmodule object • mcmodule</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The mcmodule object">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mcmodule</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/mcmodule.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/mcmodule_object.html">The mcmodule object</a></li>
    <li><a class="dropdown-item" href="../articles/multivariate_operations.html">Multivariate operations</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NataliaCiria/mcmodule/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>The mcmodule object</h1>
                        <h4 data-toc-skip class="author">Natalia
Ciria</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NataliaCiria/mcmodule/blob/main/vignettes/mcmodule_object.Rmd" class="external-link"><code>vignettes/mcmodule_object.Rmd</code></a></small>
      <div class="d-none name"><code>mcmodule_object.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/NataliaCiria/mcmodule" class="external-link">mcmodule</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: mc2d</span></span>
<span><span class="co">#&gt; Loading required package: mvtnorm</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'mc2d'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     pmax, pmin</span></span></code></pre></div>
<div class="section level3">
<h3 id="expressions">Expressions<a class="anchor" aria-label="anchor" href="#expressions"></a>
</h3>
</div>
<div class="section level3">
<h3 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
</div>
<div class="section level3">
<h3 id="nodes">Nodes<a class="anchor" aria-label="anchor" href="#nodes"></a>
</h3>
<div class="section level4">
<h4 id="input-nodes">Input nodes<a class="anchor" aria-label="anchor" href="#input-nodes"></a>
</h4>
</div>
<div class="section level4">
<h4 id="nodes-metadata">Nodes metadata<a class="anchor" aria-label="anchor" href="#nodes-metadata"></a>
</h4>
</div>
</div>
<div class="section level3">
<h3 id="modules">Modules<a class="anchor" aria-label="anchor" href="#modules"></a>
</h3>
<div class="section level4">
<h4 id="structure">Structure<a class="anchor" aria-label="anchor" href="#structure"></a>
</h4>
</div>
<div class="section level4">
<h4 id="modules-metadata">Modules metadata<a class="anchor" aria-label="anchor" href="#modules-metadata"></a>
</h4>
</div>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This guide presents a flexible approach for building risk assessment
models with Monte Carlo simulations in R. The framework is
<strong>multivariate</strong>, allowing simultaneous analysis of
multiple variates (different categories or groups), and
<strong>modular,</strong> breaking complex systems into manageable
components.</p>
<p>The <code>mc2d</code> R package <span class="citation">(<a href="#ref-mc2d">Pouillot and Delignette-Muller 2010</a>)</span>
provides tools to build and analyse models involving multiple variables
and uncertainties based on Monte Carlo simulations. However, these tools
are limited when handling multiple variates, and complex models can be
difficult to analyse and interpret. The <code>mcmodule</code> package
builds on the R package mc2d to enhance model flexibility. This new
package provides:</p>
<ol style="list-style-type: decimal">
<li>Tools to add metadata to model elements for better traceability and
debugging</li>
<li>Tools to handle complex multivariate variables</li>
<li>A framework to break down Monte Carlo models into smaller, reusable
components (modules) that can be analysed independently before
integration</li>
</ol>
</div>
<div class="section level2">
<h2 id="multivariate-monte-carlo-simulations">Multivariate Monte-Carlo simulations<a class="anchor" aria-label="anchor" href="#multivariate-monte-carlo-simulations"></a>
</h2>
<div class="line-block"><em>This section draws from the <a href="https://cran.r-project.org/package=mc2d" class="external-link">mc2d</a> package
vignette, with adaptations for modular Monte Carlo
simulations.</em></div>
<p>Quantitative risk analysis is the numerical assessment of risk to
facilitate decision making in the face of uncertainty. Monte Carlo
simulation is a technique used to model and analyse uncertainty <span class="citation">(<a href="#ref-Vose2008">Vose 2008</a>)</span>. In
typical two-dimensional Monte Carlo simulation, one dimension represents
variability and the other represents uncertainty. However, in this
framework, we take a different approach where:</p>
<ul>
<li><p>We combine <strong>variability</strong> and
<strong>uncertainty</strong> into one dimension
(<strong><em>u</em></strong>)</p></li>
<li><p>We use <strong>variates</strong> (representing different groups
or categories) in the other dimension
(<strong><em>i</em></strong>)</p></li>
</ul>
<p>This approach enables us to track multiple values across groups
simultaneously using variates and to handle cases where values must be
aggregated by animal movements, farms, or other grouped entities.
Although it would be technically possible to separate variability and
uncertainty, the exponential increase in computational and programming
requirements would make it impractical in models of this size.</p>
<p>In this framework, an mcnode is an array of <strong>dimensions
(<em>u</em> × 1 × <em>i</em>)</strong>, where u is the dimension of
variability and uncertainty combined, and i is the number of variates.
As most of the input parameters are uncertain, we will use the term
“uncertainty dimension” throughout this document to refer to the
combined dimension of variability and uncertainty.</p>
<div class="float">
<img src="images/mcmodule_mcnode_definition.png" style="display: block; margin: 1em auto;width:40.0%" fig-align="center" alt="Structure of an mcnode containing u uncertainty iterations and i variates."><div class="figcaption">Structure of an mcnode containing u uncertainty
iterations and i variates.</div>
</div>
<p>For example, if we are buying a number of cows and heifers from a
specific region, a mcnode for herd prevalence would have:</p>
<ul>
<li><p>Multiple variates (rows), each representing a specific animal
category-disease combination. The variables that define and distinguish
these variates are called <strong>keys</strong>.</p></li>
<li><p>Probability values generated through a PERT distribution (rpert),
using minimum, mode, and maximum parameters across <em>u</em> iterations
(columns) to model the uncertainty in these estimates.</p></li>
</ul>
<div class="float">
<img src="images/mcmodule_mcnode_example.png" style="display: block; margin: 1em auto;width:85.0%" fig-align="center" alt="An mcnode representing herd prevalence of three pathogens, tuberculosis (TB), infectious bovine rhinotracheitis (IBR), and bovine viral diarrhea (BVD), and two animal categories (cows and heifers). The herd prevalence is the same for both animal categories, but values differ due to the stochastic nature of random sampling from the PERT distribution."><div class="figcaption">An mcnode representing herd prevalence of three
pathogens, tuberculosis (TB), infectious bovine rhinotracheitis (IBR),
and bovine viral diarrhea (BVD), and two animal categories (cows and
heifers). The herd prevalence is the same for both animal categories,
but values differ due to the stochastic nature of random sampling from
the PERT distribution.</div>
</div>
<div class="section level3">
<h3 id="scenarios">Scenarios<a class="anchor" aria-label="anchor" href="#scenarios"></a>
</h3>
<p>This framework enables the creation and comparison of scenarios. For
comparisons, you need a baseline scenario (scenario “0”) and one or more
alternative scenarios. Variates within a scenario are called “groups.”
While not every scenario needs to contain all baseline groups, any
groups present in alternative scenarios must exist in the baseline.</p>
<p>The scenario id, group id, and row number are the three mcnode
properties that enable row matching and row aggregation operations.</p>
<div class="float">
<img src="images/mcmodule_mcnode_scenarios.png" style="display: block; margin: 1em auto;width:70.0%" fig-align="center" alt="An mcnode representing the probability of a farm being infected in a baseline scenario (“0”, in blue) and in a what-if scenario where there is a control plan implemented (“a”, in green)."><div class="figcaption">An mcnode representing the probability of a farm
being infected in a baseline scenario (“0”, in blue) and in a what-if
scenario where there is a control plan implemented (“a”, in
green).</div>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-mc2d" class="csl-entry">
Pouillot, R., and M.-L. Delignette-Muller. 2010. <span>“Evaluating
Variability and Uncertainty in Microbial Quantitative Risk Assessment
Using Two r Packages”</span> 142: 330–40.
</div>
<div id="ref-Vose2008" class="csl-entry">
Vose, David. 2008. <em>Risk Analysis, a Quantitative Guide</em>.
Chichester, England: John Wiley &amp; Sons.
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Natalia Ciria.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
